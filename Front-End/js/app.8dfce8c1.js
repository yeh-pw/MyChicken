(function(t){function e(e){for(var c,o,i=e[0],u=e[1],s=e[2],b=0,d=[];b<i.length;b++)o=i[b],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(c in u)Object.prototype.hasOwnProperty.call(u,c)&&(t[c]=u[c]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],c=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(c=!1)}c&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var c={},a={app:0},r=[];function o(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=c,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)o.d(n,c,function(e){return t[e]}.bind(null,c));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var s=0;s<i.length;s++)e(i[s]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"27d3":function(t,e,n){},"52e3":function(t,e,n){"use strict";n("27d3")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23");function a(t,e){var n=Object(c["y"])("router-view");return Object(c["r"])(),Object(c["d"])(n)}n("9aee");var r=n("6b0d"),o=n.n(r);const i={},u=o()(i,[["render",a]]);var s=u,l=n("6c02"),b=n("cf05"),d=n.n(b),f=function(t){return Object(c["u"])("data-v-7101b04e"),t=t(),Object(c["s"])(),t},j={class:"populate"},p={class:"box"},O=f((function(){return Object(c["g"])("div",{class:"logo"},[Object(c["g"])("img",{src:d.a,alt:""})],-1)})),g={class:"id_pw"},v=f((function(){return Object(c["g"])("div",{class:"id_pw_kiri"},[Object(c["g"])("div",{class:"input_name"},[Object(c["g"])("h1",null,"ID"),Object(c["g"])("h1",null,":")]),Object(c["g"])("div",{class:"input_name"},[Object(c["g"])("h1",null,"Password"),Object(c["g"])("h1",null,":")])],-1)})),h={class:"id_pw_kanan"},m={class:"submit"},_={key:0,class:"error"},y=f((function(){return Object(c["g"])("h1",null,"Login",-1)})),k=[y];function w(t,e,n,a,r,o){return Object(c["r"])(),Object(c["f"])("div",j,[Object(c["g"])("div",p,[O,Object(c["g"])("div",g,[v,Object(c["g"])("div",h,[Object(c["F"])(Object(c["g"])("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=function(t){return r.id=t})},null,512),[[c["C"],r.id]]),Object(c["F"])(Object(c["g"])("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=function(t){return r.password=t})},null,512),[[c["C"],r.password]])])]),Object(c["g"])("div",m,[r.login_error?(Object(c["r"])(),Object(c["f"])("div",_,[Object(c["g"])("h3",null,Object(c["A"])(r.login_message),1)])):Object(c["e"])("",!0),Object(c["g"])("div",{class:"button",onClick:e[2]||(e[2]=function(t){return o.login()})},k)])])])}var C=n("bc3a"),A=n.n(C),x=n("2b27"),I=n.n(x),S={name:"Login",data:function(){return{id:null,password:null,login_error:!1,login_message:null}},methods:{login:function(){var t=this,e={id:this.id,password:this.password};A.a.post("https://main-api.yehezkiel.pw/login",e).then((function(e){if("error"in e.data)t.login_error=!0,t.login_message=e.data["error"],t.$router.push({path:"/login"});else{var n=e.data["access_token"],c=e.data["id"],a=e.data["role"];I.a.set("jwt",n,"1h"),I.a.set("id",c,"1h"),I.a.set("role",a,"1h"),t.$router.push({path:"/"})}}))}}};n("8e05");const q=o()(S,[["render",w],["__scopeId","data-v-7101b04e"]]);var P=q,T=function(t){return Object(c["u"])("data-v-f9b2e9e8"),t=t(),Object(c["s"])(),t},E={class:"populate"},N={class:"below_navbar"},R={class:"kiri"},M={class:"cart"},K={class:"pure-table"},$=T((function(){return Object(c["g"])("thead",null,[Object(c["g"])("th",null,"No"),Object(c["g"])("th",null,"Makanan"),Object(c["g"])("th",null,"Harga"),Object(c["g"])("th",null,"Qty"),Object(c["g"])("th",null,"Sub Total"),Object(c["g"])("th",null,"Â ")],-1)})),F=["onClick"],L={class:"totalpay"},U={class:"total"},V={class:"paycancel"},D=T((function(){return Object(c["g"])("h3",null,"Cancel Invoice",-1)})),z=[D],J=T((function(){return Object(c["g"])("h3",null,"Proceed Payment",-1)})),B=[J],G={class:"kanan"},H={class:"card_image"},Q=["src"],X={class:"food_name"},W={class:"food_add"},Y=["onUpdate:modelValue"],Z=["onClick"];function tt(t,e,n,a,r,o){var i=Object(c["y"])("Navbar");return Object(c["r"])(),Object(c["f"])("div",E,[Object(c["i"])(i),Object(c["g"])("div",N,[Object(c["g"])("div",R,[Object(c["g"])("div",M,[Object(c["g"])("table",K,[$,Object(c["g"])("tbody",null,[(Object(c["r"])(!0),Object(c["f"])(c["a"],null,Object(c["x"])(o.get_cart,(function(t,e){return Object(c["r"])(),Object(c["f"])("tr",{key:t,class:"cart"},[Object(c["g"])("td",null,Object(c["A"])(e+1),1),Object(c["g"])("td",null,Object(c["A"])(t.makanan),1),Object(c["g"])("td",null,Object(c["A"])(t.harga),1),Object(c["g"])("td",null,Object(c["A"])(t.qty),1),Object(c["g"])("td",null,Object(c["A"])(t.sub_tot),1),Object(c["g"])("td",{onClick:function(t){return o.remove(e)}},"X",8,F)])})),128))])])]),Object(c["g"])("div",L,[Object(c["g"])("div",U,[Object(c["g"])("h2",null,"Total : "+Object(c["A"])(o.get_total_cart),1)]),Object(c["g"])("div",V,[Object(c["g"])("div",{onClick:e[0]||(e[0]=function(){return o.cancel_invoice&&o.cancel_invoice.apply(o,arguments)}),class:"cancel"},z),Object(c["g"])("div",{onClick:e[1]||(e[1]=function(t){return o.proceed_payment(o.get_total_cart)}),class:"pay"},B)])])]),Object(c["g"])("div",G,[(Object(c["r"])(!0),Object(c["f"])(c["a"],null,Object(c["x"])(o.products,(function(t){return Object(c["r"])(),Object(c["f"])("div",{key:t,class:"cards"},[Object(c["g"])("div",H,[Object(c["g"])("img",{src:"http://127.0.0.1:5001/get_image/"+t[2],alt:""},null,8,Q)]),Object(c["g"])("div",X,[Object(c["g"])("p",null,Object(c["A"])(t[0]),1),Object(c["g"])("p",null,"Rp."+Object(c["A"])(t[1]),1)]),Object(c["g"])("div",W,[Object(c["F"])(Object(c["g"])("input",{type:"text",ref_for:!0,ref:"qtyInput","onUpdate:modelValue":function(e){return t.food_qty=e}},null,8,Y),[[c["C"],t.food_qty]]),Object(c["g"])("div",{class:"add",onClick:function(e){return o.add(t)}},"Add",8,Z)])])})),128))])])])}n("d3b7"),n("c740"),n("a434"),n("159b"),n("99af");var et=function(t){return Object(c["u"])("data-v-7504e2d5"),t=t(),Object(c["s"])(),t},nt={class:"container"},ct=et((function(){return Object(c["g"])("div",{class:"logo"},[Object(c["g"])("img",{src:d.a,alt:""})],-1)})),at={key:0,class:"navigation"},rt=Object(c["h"])("Cashier"),ot=Object(c["h"])("Administration"),it=Object(c["h"])("Sales Report"),ut={class:"name_time"},st={class:"time"},lt={class:"name"};function bt(t,e,n,a,r,o){var i=Object(c["y"])("router-link");return Object(c["r"])(),Object(c["f"])("div",nt,[ct,r.is_manager?(Object(c["r"])(),Object(c["f"])("div",at,[Object(c["i"])(i,{class:"nav_link",to:"/"},{default:Object(c["E"])((function(){return[rt]})),_:1}),Object(c["i"])(i,{class:"nav_link",to:"administration"},{default:Object(c["E"])((function(){return[ot]})),_:1}),Object(c["i"])(i,{class:"nav_link",to:"sales_report"},{default:Object(c["E"])((function(){return[it]})),_:1})])):Object(c["e"])("",!0),Object(c["g"])("div",ut,[Object(c["g"])("div",st,[Object(c["g"])("h3",null,Object(c["A"])(r.time),1)]),Object(c["g"])("div",lt,[Object(c["g"])("h2",null,Object(c["A"])(r.logged_id),1),Object(c["g"])("div",{class:"logout",onClick:e[0]||(e[0]=function(t){return o.logout()})},"Logout")])])])}var dt={data:function(){return{interval:null,time:null,logged_id:I.a.get("id"),is_manager:this.manager_check()}},methods:{manager_check:function(){var t=I.a.get("role");return"manager"==t},logout:function(){I.a.remove("jwt"),I.a.remove("role"),I.a.remove("id"),this.$router.push({path:"/login"})}},beforeDestroy:function(){clearInterval(this.interval)},mounted:function(){var t=this;this.interval=setInterval((function(){t.time=Intl.DateTimeFormat("id-GB",{dateStyle:"full",timeStyle:"short"}).format()}),1e3)}};n("7d14");const ft=o()(dt,[["render",bt],["__scopeId","data-v-7504e2d5"]]);var jt=ft,pt={name:"Cashier",components:{Navbar:jt},data:function(){return{food_qty:"",cart:[]}},methods:{add:function(t){if(t.food_qty>0){var e=t[0],n=t[1],c=parseInt(t.food_qty),a=n*c,r=function(t){return t.makanan==e},o=this.cart.some(r);if(1==o){var i=this.cart.findIndex((function(t){return t.makanan==e}));this.cart[i].qty+=c,this.cart[i].sub_tot+=a}else{var u={makanan:e,harga:n,qty:c,sub_tot:a};this.cart.push(u)}t.food_qty=null}},remove:function(t){this.cart.splice(t,1)},cancel_invoice:function(){this.cart=[]},proceed_payment:function(t){var e={total:t};A.a.post("http://127.0.0.1:5000/post_invoice",e).then((function(t){}));var n="Telah terjadi transaksi :\n \n";this.cart.forEach((function(t){var e="- ".concat(t.makanan," (").concat(t.harga,"), sebanyak ").concat(t.qty," porsi. Sub Total : Rp. ").concat(t.sub_tot,". \n");n+=e})),n+="\n Total transaksi : Rp. ".concat(this.get_total_cart);var c=prompt("Kirimkan invoice ke alamat email:");if(null==c)alert("Tidak mengirimkan invoice, terima kasih!"),this.cart=[];else{var a={subject:"My Chicken Transaction Report",to:c,body:n,key:"ibda3211-yehezkielpw"};A.a.post("http://127.0.0.1:5002/send_mail",a).then((function(t){})),alert("Invoice dikirimkan, terima kasih!")}this.cart=[]}},computed:{products:function(){return this.$store.state.products},img:function(t){var e="http://127.0.0.1:5001/get_image/"+t;return e},get_cart:function(){return this.cart},get_total_cart:function(){var t=this.cart.reduce((function(t,e){return t+e.sub_tot}),0);return t}},mounted:function(){this.$store.dispatch("fetch_products")}};n("ebb7");const Ot=o()(pt,[["render",tt],["__scopeId","data-v-f9b2e9e8"]]);var gt=Ot,vt=n("74a6"),ht=n.n(vt),mt=function(t){return Object(c["u"])("data-v-365a0559"),t=t(),Object(c["s"])(),t},_t={class:"populate"},yt=mt((function(){return Object(c["g"])("div",{class:"below_navbar"},[Object(c["g"])("div",{class:"under_con"},[Object(c["g"])("h1",null," Sorry, sales report feature is under construction, will be available soon. "),Object(c["g"])("img",{src:ht.a,alt:""})])],-1)}));function kt(t,e,n,a,r,o){var i=Object(c["y"])("Navbar");return Object(c["r"])(),Object(c["f"])("div",_t,[Object(c["i"])(i),yt])}var wt={name:"SaleReport",components:{Navbar:jt}};n("52e3");const Ct=o()(wt,[["render",kt],["__scopeId","data-v-365a0559"]]);var At=Ct,xt=function(t){return Object(c["u"])("data-v-1e11afca"),t=t(),Object(c["s"])(),t},It={class:"populate"},St=xt((function(){return Object(c["g"])("div",{class:"below_navbar"},[Object(c["g"])("div",{class:"under_con"},[Object(c["g"])("h1",null," Sorry, administration feature is under construction, will be available soon. "),Object(c["g"])("img",{src:ht.a,alt:""})])],-1)}));function qt(t,e,n,a,r,o){var i=Object(c["y"])("Navbar");return Object(c["r"])(),Object(c["f"])("div",It,[Object(c["i"])(i),St])}var Pt={name:"Administration",components:{Navbar:jt}};n("bf61");const Tt=o()(Pt,[["render",qt],["__scopeId","data-v-1e11afca"]]);var Et=Tt,Nt=n("5502"),Rt="https://127.0.0.1:5000",Mt=Object(Nt["a"])({state:{products:null},mutations:{fetch_products:function(t,e){t.products=e},clear_products:function(t){t.products=null}},actions:{fetch_products:function(t){var e=t.commit;A()(Rt+"/get_products").then((function(t){e("fetch_products",t.data)}))},clear_products:function(t){var e=t.commit;e("clear_products")}},getters:{},modules:{}}),Kt=[{path:"/login",name:"Login",component:P,beforeEnter:function(t,e,n){1==I.a.isKey("role")?n("/"):n()}},{path:"/",name:"Cashier",component:gt,beforeEnter:function(t,e,n){0==I.a.isKey("role")?n("/login"):n()}},{path:"/sales_report",name:"SalesReport",component:At,beforeEnter:function(t,e,n){0==I.a.isKey("role")?n("/login"):"manager"!=I.a.get("role")?n("/"):n()}},{path:"/administration",name:"Administration",component:Et,beforeEnter:function(t,e,n){0==I.a.isKey("role")?n("/login"):"manager"!=I.a.get("role")?n("/"):n()}}],$t=Object(l["a"])({history:Object(l["b"])("/"),routes:Kt}),Ft=$t;Object(c["c"])(s).use(Mt).use(Ft).mount("#app")},"74a6":function(t,e,n){t.exports=n.p+"img/under_con.2abc1020.png"},"7d14":function(t,e,n){"use strict";n("8f39")},8730:function(t,e,n){},"8e05":function(t,e,n){"use strict";n("8730")},"8f39":function(t,e,n){},"911c":function(t,e,n){},"9aee":function(t,e,n){"use strict";n("e58b")},bf61:function(t,e,n){"use strict";n("de47")},cf05:function(t,e,n){t.exports=n.p+"img/logo.c219c53c.png"},de47:function(t,e,n){},e58b:function(t,e,n){},ebb7:function(t,e,n){"use strict";n("911c")}});
//# sourceMappingURL=app.8dfce8c1.js.map